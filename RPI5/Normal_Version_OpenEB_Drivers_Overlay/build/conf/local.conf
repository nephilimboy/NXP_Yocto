MACHINE = "raspberrypi5"
INIT_MANAGER = "systemd"
LICENSE_FLAGS_ACCEPTED = "synaptics-killswitch"

DISTRO ?= "poky"
#EXTRA_IMAGE_FEATURES ?= "debug-tweaks"

USER_CLASSES ?= "buildstats"

PATCHRESOLVE = "noop"

BB_DISKMON_DIRS ??= "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    STOPTASKS,/tmp,100M,100K \
    HALT,${TMPDIR},100M,1K \
    HALT,${DL_DIR},100M,1K \
    HALT,${SSTATE_DIR},100M,1K \
    HALT,/tmp,10M,1K"

PACKAGECONFIG:append:pn-qemu-system-native = " sdl"
CONF_VERSION = "2"

PREFERRED_VERSION_linux-raspberrypi = "6.12%"

IMAGE_INSTALL:append = " openeb linux-sensor-drivers genx320-overlay"
IMAGE_INSTALL:append = " i2c-tools"
IMAGE_INSTALL:append = " dtc media-ctl v4l-utils"

IMAGE_INSTALL:append = " git nano net-tools"

IMAGE_INSTALL:append = " openssh-sshd openssh-sftp-server"
IMAGE_FEATURES:append = " ssh-server-openssh"


IMAGE_INSTALL:append = " xserver-xorg xinit xauth xterm twm"

RPI_EXTRA_CONFIG:append = "\ndtoverlay=genx320,cam0"


EXTRA_IMAGE_FEATURES += "allow-root-login empty-root-password"

